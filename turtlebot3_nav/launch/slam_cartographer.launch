<launch>
  <arg name="output"/>
  <arg name="robot_namespace"/>
  <arg name="configuration_basename"/>
  <env name="robot_namespace" value="$(arg robot_namespace)"/>

  <!-- cartographer_node -->
  <node pkg="cartographer_ros" type="cartographer_node" name="$(arg robot_namespace)_cartographer_node" 
        args="-configuration_directory $(find turtlebot3_nav)/config
			  -configuration_basename $(arg configuration_basename)"
        output="$(arg output)">
    <remap from="imu" to="$(arg robot_namespace)_flat_imu"/>
	<remap from="odom" to="$(arg robot_namespace)_odom"/>
	<remap from="scan" to="$(arg robot_namespace)_scan"/>
	<remap from="submap_list" to="$(arg robot_namespace)_submap_list"/>
  </node>

  <!-- cartographer_occupancy_grid_node -->
  <node pkg="cartographer_ros" type="cartographer_occupancy_grid_node"
        name="$(arg robot_namespace)_cartographer_occupancy_grid_node"
        args="-resolution 0.05">
	<remap from="submap_list" to="$(arg robot_namespace)_submap_list"/>
	<remap from="map" to="$(arg robot_namespace)_map"/>
  </node>

  <!-- flat_world_imu_node -->
  <node pkg="turtlebot3_slam" type="flat_world_imu_node" name="$(arg robot_namespace)_flat_world_imu_node" output="screen">
    <remap from="imu_in" to="$(arg robot_namespace)_imu" />
    <remap from="imu_out" to="$(arg robot_namespace)_flat_imu"/>
  </node>

</launch>
